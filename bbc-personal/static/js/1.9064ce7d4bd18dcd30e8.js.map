{"version":3,"sources":["webpack:///src/components/Activity/Abysharer.vue","webpack:///./src/components/Activity/Abysharer.vue?29ed","webpack:///./src/components/Activity/Abysharer.vue","webpack:///./src/utils/request6.js","webpack:///./src/api/activity.js"],"names":["Abysharer","data","show","phone","errorMsg","errorSms","sms","oldUrl","newUserId","path","openid","unionId","oldUserId","mounted","this","getOldUrl","methods","urlStr","window","location","href","split","obj","map","item","decodeURIComponent","userId","console","log","bindUserRelation","url","activity","then","response","sendSms","params","confirmMsg","_this","recive","code","wejoin","Activity_Abysharer","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","type","size","on","click","$event","_m","style","width","padding","model","value","callback","$$v","expression","placeholder","error-message","blur","length","center","clearable","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","service","axios","create","baseURL","timeout","request","options","interceptors","use","config","token","store","state","headers","common","error","promise_default","a","reject","status","row","method","qs","stringify"],"mappings":"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","file":"static/js/1.9064ce7d4bd18dcd30e8.js","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 分享者内容 -->\r\n    <div class=\"sharer\">\r\n      this is bysharer content\r\n    </div>\r\n    <!-- 我要参与 -->\r\n    <div class=\"join\">\r\n      <van-button type=\"primary\" size=\"small\" @click=\"show = true\">我要参与</van-button>\r\n      <van-button type=\"primary\" size=\"small\">我要分享</van-button>\r\n    </div>\r\n    <!-- 活动细则 -->\r\n    <div class=\"actrules\">\r\n      <div class=\"rulestit\">活动细则</div>\r\n      <ul class=\"rulescon\">\r\n        <li>1.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx</li>\r\n        <li>2.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx</li>\r\n        <li>3.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx</li>\r\n      </ul>\r\n    </div>\r\n    <!-- 电话弹窗 -->\r\n    <van-popup v-model=\"show\" :style=\"{ width: '60%', padding: '10px' }\">\r\n      <p class=\"phonetit\">为了更好的服务您我们需要获取您的电话，输入电话参与活动。</p>\r\n      <van-cell-group>\r\n        <van-field v-model=\"phone\" placeholder=\"请输入手机号\" :error-message=\"errorMsg\" @blur=\"errorMsg = phone.length == 11 ? '' : '手机号码格式错误'\"/>\r\n        <van-field v-model=\"sms\" center clearable placeholder=\"请输入短信验证码\" :error-message=\"errorSms\">\r\n          <van-button slot=\"button\" size=\"mini\" type=\"primary\" @click=\"sendSms\">发送验证码</van-button>\r\n        </van-field>\r\n      </van-cell-group>\r\n      <p class=\"confirm\"><van-button type=\"primary\" size=\"small\" @click=\"confirmMsg\">确定</van-button></p>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n<script>\r\nimport * as ACT_API from '@/api/activity'\r\nexport default {\r\n  data() {\r\n    return {\r\n      show: false,\r\n      phone: '',\r\n      errorMsg: '',\r\n      errorSms: '',\r\n      sms: '',\r\n      oldUrl: '',\r\n      newUserId: '',\r\n      // 微信授权信息\r\n      path: null,\r\n      openid: '',\r\n      unionId: '',\r\n      oldUserId: '',\r\n    }\r\n  },\r\n  mounted() {\r\n    // this.LoginWechat();\r\n    this.getOldUrl()\r\n  },\r\n  methods: {\r\n    // 拿到绑定关系的url\r\n    getOldUrl() {\r\n      let urlStr = window.location.href.split('?')[1]\r\n      let obj = {}\r\n\t\t\tif (urlStr) {\r\n\t\t\t\tlet str = urlStr\r\n\t\t\t\tlet firstArr = str.split('&')\r\n\t\t\t\tlet arr = []\r\n\t\t\t\tfirstArr.map(item => {\r\n\t\t\t\t\tobj[item.split('=')[0]] = decodeURIComponent(item.split('=')[1])\r\n        })\r\n      }\r\n      this.oldUrl = obj.oldUserId\r\n      this.newUserId = obj.userId\r\n      console.log('父级绑定关系URL：', this.oldUrl)\r\n      console.log('当前用户id', this.newUserId)\r\n      // this.bindUserRelation()\r\n    },\r\n    // 绑定用户上下级关系\r\n    bindUserRelation() {\r\n      let url = `${this.oldUrl}/${this.newUserId}`\r\n      ACT_API.bindUserRelation(url).then(response => {\r\n        console.log('绑定关系是否成功', response)\r\n      })\r\n    },\r\n    // 发送信息\r\n    sendSms() {\r\n      let params = {\r\n        phone: this.phone\r\n      }\r\n      ACT_API.sendSms(params)\r\n    },\r\n    // 确认信息\r\n    confirmMsg() {\r\n      let params = {\r\n        recive: this.phone,\r\n        code: this.sms\r\n      }\r\n      ACT_API.checkCode(params).then(response => {\r\n        if (response == null) {\r\n          this.errorSms = '验证码错误'\r\n        }\r\n      })\r\n    },\r\n    wejoin() {\r\n      console.log(1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"css\" scoped>\r\n.sharer {width: 100%; height: 8rem; background: pink; text-align: center; line-height: 8rem; margin-bottom: .8rem;}\r\n.join {text-align: center; margin-bottom: .8rem;}\r\n.actrules {width: 100%; border-top: .02rem solid #bbb; padding-top: .2rem; color: #101010;}\r\n.rulestit {margin: auto; font-size: .36rem; text-align: center; margin-bottom: .04rem;}\r\n.rulescon li {font-size: .28rem; margin-left: .4rem; margin-bottom: .2rem;}\r\n.phonetit {font-size: .28rem; line-height: .28rem; margin-bottom: .16rem;}\r\n.confirm {padding-top: .16rem; text-align: center;}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Activity/Abysharer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"sharer\"},[_vm._v(\"\\n    this is bysharer content\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"join\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.show = true}}},[_vm._v(\"我要参与\")]),_vm._v(\" \"),_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\"我要分享\")])],1),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('van-popup',{style:({ width: '60%', padding: '10px' }),model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('p',{staticClass:\"phonetit\"},[_vm._v(\"为了更好的服务您我们需要获取您的电话，输入电话参与活动。\")]),_vm._v(\" \"),_c('van-cell-group',[_c('van-field',{attrs:{\"placeholder\":\"请输入手机号\",\"error-message\":_vm.errorMsg},on:{\"blur\":function($event){_vm.errorMsg = _vm.phone.length == 11 ? '' : '手机号码格式错误'}},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"center\":\"\",\"clearable\":\"\",\"placeholder\":\"请输入短信验证码\",\"error-message\":_vm.errorSms},model:{value:(_vm.sms),callback:function ($$v) {_vm.sms=$$v},expression:\"sms\"}},[_c('van-button',{attrs:{\"slot\":\"button\",\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.sendSms},slot:\"button\"},[_vm._v(\"发送验证码\")])],1)],1),_vm._v(\" \"),_c('p',{staticClass:\"confirm\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.confirmMsg}},[_vm._v(\"确定\")])],1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"actrules\"},[_c('div',{staticClass:\"rulestit\"},[_vm._v(\"活动细则\")]),_vm._v(\" \"),_c('ul',{staticClass:\"rulescon\"},[_c('li',[_vm._v(\"1.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\")]),_vm._v(\" \"),_c('li',[_vm._v(\"2.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\")]),_vm._v(\" \"),_c('li',[_vm._v(\"3.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-c9619ea2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/Activity/Abysharer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c9619ea2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Abysharer.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Abysharer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Abysharer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c9619ea2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Abysharer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c9619ea2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Activity/Abysharer.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\r\nimport axios from \"axios\"\r\nimport store from \"@/store/index\"\r\n\r\nconst service = axios.create({\r\n  baseURL:  \"http://testuser.meibbc.com/dev\",\r\n  // 预发布\r\n  // baseURL:  \"http://papp.meibbc.com/\",\r\n  // 测试\r\n  // baseURL:  \"http://tapp.meibbc.com/\",\r\n  // baseURL:  \"http://39.108.143.243:8787\",\r\n  timeout: 15000,\r\n})\r\n\r\n// 添加请求拦截器\r\nservice.interceptors.request.use(function (config) {\r\n  // let token = sessionStorage.getItem(\"token\");\r\n  let token = store.state.token\r\n  config.headers.common['Authorization'] = token;\r\n  // 在发送请求之前做些什么\r\n  return config;\r\n}, function (error) {\r\n  // 对请求错误做些什么\r\n  return Promise.reject(error);\r\n});\r\n\r\n\r\n// 添加响应拦截器\r\nservice.interceptors.response.use(function (response) {\r\n  let status = response.data.code;\r\n  let row = response.data.data;\r\n  if(status == 200){\r\n    if(row === \"\" || row == null){\r\n      row = true;\r\n    }\r\n  }else if(status == 10001){\r\n    row = false;\r\n  }\r\n  // 对响应数据做点什么\r\n  return row;\r\n}, function (error) {\r\n  // 对响应错误做点什么\r\n  return Promise.reject(error);\r\n});\r\n\r\nexport default function request(options) {\r\n  return service(options)\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/request6.js","import request from \"../utils/request6\"\r\nimport qs from \"qs\"\r\n\r\n// 获取商家列表信息\r\nexport function getBusinessData(params) {\r\n  return request({\r\n    url:\"/personal/saleorg/querySaleOrgList\",\r\n    method:\"post\",\r\n    data: params\r\n  })\r\n}\r\n\r\n// 发送短信息\r\nexport function sendSms(params) {\r\n  return request({\r\n    url: '/sendSMSCode',\r\n    method: 'post',\r\n    data: qs.stringify(params)\r\n  })\r\n}\r\n\r\n// 校验验证码\r\nexport function checkCode(params) {\r\n  return request({\r\n    url: '/checkCode',\r\n    method: 'post',\r\n    data: qs.stringify(params)\r\n  })\r\n}\r\n\r\n// 得到用户信息\r\nexport function getWxLoading(params) {\r\n  return request({\r\n    url: '/api/v1/user/threeLogin',\r\n    method: 'post',\r\n    data: qs.stringify(params)\r\n  })\r\n}\r\n\r\n// 得到分享地址\r\nexport function getJoinUrl(params) {\r\n  return request({\r\n    url: `/personal/saleorg/getShareUrl/${params}`,\r\n    method: 'get',\r\n  })\r\n}\r\n\r\n// 绑定用户上下级关系\r\nexport function bindUserRelation(url) {\r\n  return request({\r\n    url,\r\n    method: 'get'\r\n  })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/activity.js"],"sourceRoot":""}